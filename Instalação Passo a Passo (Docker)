1 - Pr√©-requisitos

Servidor Linux (Ubuntu 20.04+ recomendado)

sudo apt update && sudo apt upgrade -y
sudo apt install -y docker.io docker-compose
sudo systemctl enable docker
sudo systemctl start docker


Verifique:

docker --version
docker-compose --version

2 - Estrutura do Projeto
mkdir guacamole
cd guacamole

3 - Criando o docker-compose.yml

Crie o arquivo:

nano docker-compose.yml


Cole exatamente isso üëá

version: '3'

services:
  guacd:
    image: guacamole/guacd
    container_name: guacd
    restart: always

  mysql:
    image: mysql:8.0
    container_name: guac-mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: guacamole_db
      MYSQL_USER: guacuser
      MYSQL_PASSWORD: guacpass
    volumes:
      - dbdata:/var/lib/mysql

  guacamole:
    image: guacamole/guacamole
    container_name: guacamole
    restart: always
    depends_on:
      - guacd
      - mysql
    ports:
      - "8080:8080"
    environment:
      GUACD_HOSTNAME: guacd
      MYSQL_HOSTNAME: mysql
      MYSQL_DATABASE: guacamole_db
      MYSQL_USER: guacuser
      MYSQL_PASSWORD: guacpass

volumes:
  dbdata:


OBS: Dica: Substitua as senhas por quest√£o de seguran√ßa.

4 - Inicializando o Banco de Dados
4.1 - Gere o script SQL oficial
docker run --rm guacamole/guacamole /opt/guacamole/bin/initdb.sh --mysql > initdb.sql

4.2 - Suba apenas o MySQL
docker-compose up -d mysql

4.3Ô∏è - Importe o banco
docker exec -i guac-mysql mysql -u root -prootpass guacamole_db < initdb.sql

5 - Subindo tudo
docker-compose up -d


Verifique:

docker ps

6 - Acesso Web

No navegador:

http://IP_DO_SERVIDOR:8080/guacamole


Credenciais padr√£o:

Usu√°rio: guacadmin
Senha: guacadmin


7 - Criando uma Conex√£o (RDP / SSH)
Exemplo: SSH

Settings ‚Üí Connections ‚Üí New Connection

Protocol: SSH

Hostname: 192.168.1.10

Port: 22

Username / Password

Save

Exemplo: RDP

Protocol: RDP

Enable Drive Redirection (se quiser copiar arquivos)

Enable Clipboard

8 - Hardening e Seguran√ßa (MUITO IMPORTANTE)
8.1 - Coloque atr√°s de um Proxy Reverso (Nginx)

HTTPS obrigat√≥rio

Let‚Äôs Encrypt

Bloqueia acesso direto √† porta 8080

8.2 - Autentica√ß√£o Forte

Integra√ß√£o com LDAP / Active Directory

2FA (TOTP)

4.3 - Firewall
ufw allow 80
ufw allow 443
ufw deny 8080

4.4 - Logs e Auditoria

Guacamole registra:

Login

IP

Sess√µes

Ideal para ambiente corporativo ou investiga√ß√£o

OBS: Arquitetura Recomendada (Produ√ß√£o)
Internet
   ‚Üì
Nginx (HTTPS + WAF)
   ‚Üì
Apache Guacamole
   ‚Üì
guacd
   ‚Üì
Servidores internos (RDP / SSH)

üß± Pr√©-requisitos

Servidor Linux (Ubuntu 20.04+ recomendado)

sudo apt update && sudo apt upgrade -y
sudo apt install -y docker.io docker-compose
sudo systemctl enable docker
sudo systemctl start docker


Verifique:

docker --version
docker-compose --version

üìÅ Estrutura do Projeto
mkdir guacamole
cd guacamole

üß© Criando o docker-compose.yml

Crie o arquivo:

nano docker-compose.yml


Cole exatamente isso üëá

version: '3'

services:
  guacd:
    image: guacamole/guacd
    container_name: guacd
    restart: always

  mysql:
    image: mysql:8.0
    container_name: guac-mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: guacamole_db
      MYSQL_USER: guacuser
      MYSQL_PASSWORD: guacpass
    volumes:
      - dbdata:/var/lib/mysql

  guacamole:
    image: guacamole/guacamole
    container_name: guacamole
    restart: always
    depends_on:
      - guacd
      - mysql
    ports:
      - "8080:8080"
    environment:
      GUACD_HOSTNAME: guacd
      MYSQL_HOSTNAME: mysql
      MYSQL_DATABASE: guacamole_db
      MYSQL_USER: guacuser
      MYSQL_PASSWORD: guacpass

volumes:
  dbdata:


üí° Dica: Substitua as senhas por quest√£o de seguran√ßa.

üóÑÔ∏è Inicializando o Banco de Dados
1Ô∏è‚É£ Gere o script SQL oficial
docker run --rm guacamole/guacamole /opt/guacamole/bin/initdb.sh --mysql > initdb.sql

2Ô∏è‚É£ Suba apenas o MySQL
docker-compose up -d mysql

3Ô∏è‚É£ Importe o banco
docker exec -i guac-mysql mysql -u root -prootpass guacamole_db < initdb.sql

üöÄ Subindo tudo
docker-compose up -d


Verifique:

docker ps

üåê Acesso Web

No navegador:

http://IP_DO_SERVIDOR:8080/guacamole


Credenciais padr√£o:

Usu√°rio: guacadmin
Senha: guacadmin


üñ•Ô∏è Criando uma Conex√£o (RDP / SSH)
Exemplo: SSH

Settings ‚Üí Connections ‚Üí New Connection

Protocol: SSH

Hostname: 192.168.1.10

Port: 22

Username / Password

Save

Exemplo: RDP

Protocol: RDP

Enable Drive Redirection (se quiser copiar arquivos)

Enable Clipboard

üîí Hardening e Seguran√ßa (MUITO IMPORTANTE)
‚úÖ 1. Coloque atr√°s de um Proxy Reverso (Nginx)

HTTPS obrigat√≥rio

Let‚Äôs Encrypt

Bloqueia acesso direto √† porta 8080

‚úÖ 2. Autentica√ß√£o Forte

Integra√ß√£o com LDAP / Active Directory

2FA (TOTP)

‚úÖ 3. Firewall
ufw allow 80
ufw allow 443
ufw deny 8080

‚úÖ 4. Logs e Auditoria

Guacamole registra:

Login

IP

Sess√µes

Ideal para ambiente corporativo ou investiga√ß√£o

üß† Arquitetura Recomendada (Produ√ß√£o)
Internet
   ‚Üì
Nginx (HTTPS + WAF)
   ‚Üì
Apache Guacamole
   ‚Üì
guacd
   ‚Üì
Servidores internos (RDP / SSH)
